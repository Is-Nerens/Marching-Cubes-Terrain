TODO
- Defer chunk generation to a separate thread to avoid blocking the main thread
